Got it â€” you want your scraper to give real, verifiable flight prices for actual flights (e.g., â€œBritish Airways flight from LHR to AMS at Â£150â€), not just numbers pulled from anywhere on the page.

Right now, your logs show two main issues:

1. Youâ€™re getting prices from regex but not linking them to flights
Your regex searches (Â£\d+) are catching numbers in the HTML, but:

Many of them are not in the same element as the airline or route info.

The scraper is often detecting bot protection before it can parse the actual flight list.

Thatâ€™s why you see things like:

yaml
Copy code
ğŸ’° Regex found price: Â£54
ğŸ’° Regex found price: Â£74
ğŸ’° Regex found price: Â£99
â€¦without â€œVerified Airlineâ€ in many cases.

2. Airlinesâ€™ sites are blocking or changing selectors
From your logs:

pgsql
Copy code
ğŸ¤– Skyscanner: Bot detection triggered
ğŸ” Found 0 flight containers with selector '.result-inner'
â“ eDreams: Page not found (404) - endpoint changed
This means:

The scraper canâ€™t locate the HTML elements holding flight data because CSS selectors are outdated.

Even when it does get HTML, the site may have hidden the real content behind JavaScript or bot checks.

What you need to change to get real flight prices tied to the flight info
Update the selectors for each site

Each airline/aggregator (Kayak, Momondo, BA, Ryanair, etc.) needs correct CSS/XPath selectors to extract:

Airline name

Departure + arrival airports

Date/time

Price

This avoids â€œregex price onlyâ€ issues.

Use Playwright more aggressively when bot detection triggers

Instead of falling back to regex right away, launch a Playwright session with:

Headless off (sometimes helps with anti-bot)

Randomized User-Agent

Small wait between page load & scraping

Link regex results to flight blocks

If regex finds Â£199, confirm itâ€™s inside or near a .flight-item or .result-inner container with an airline name before saving.

Currency handling

Instead of Â£\d+, use a universal pattern for multi-currency:

regex
Copy code
(?:Â£|\$|â‚¬|Â¥|â‚¹)\s?\d+(?:[.,]\d{2})?
This covers GBP, USD, EUR, JPY, INR, etc.

Fail fast on â€œbot detectedâ€ HTML

If HTML contains captcha or bot text, skip regex so you donâ€™t record fake prices from placeholders.

âœ… If you want, I can rewrite your scraper logic so each â€œreal priceâ€ line is linked with airline, route, date, and currency, even if regex is used â€” making your logs look like:

yaml
Copy code
âœ… Added REAL flight: British Airways LHR â†’ AMS 2025-08-27 Â£150
âœ… Added REAL flight: Ryanair STN â†’ BCN 2025-08-29 â‚¬29
That would solve the â€œprice without flight infoâ€ problem completely.